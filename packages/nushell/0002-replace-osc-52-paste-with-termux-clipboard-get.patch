From 56b1b3dd22cf67472f9959cab5eca603eff6e079 Mon Sep 17 00:00:00 2001
From: Termux <contact@termux.dev>
Date: Mon, 8 Sep 2025 02:07:14 +0600
Subject: [PATCH 2/2] replace osc 52 paste with termux-clipboard-get

---
 crates/nu-std/std/clip/mod.nu | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

diff --git a/crates/nu-std/std/clip/mod.nu b/crates/nu-std/std/clip/mod.nu
index d559fab..fb08e3a 100644
--- a/crates/nu-std/std/clip/mod.nu
+++ b/crates/nu-std/std/clip/mod.nu
@@ -52,16 +52,13 @@ export def paste []: [nothing -> string] {
 } --result "Hello"
 export def paste52 []: [nothing -> string] {
   try {
-    term query $'(ansi osc)52;c;?(ansi st)' -p $'(ansi osc)52;c;' -t (ansi st)
+    ^@TERMUX_PREFIX@/bin/termux-clipboard-get
   } catch {
     error make -u {
-      msg: "Terminal did not responds to OSC 52 paste request."
-      help: $"Check if your terminal supports OSC 52."
+      msg: "termux-clipboard-get failed to paste."
+      help: $"Make sure you have Termux:API app and termux-api package installed."
     }
   }
-  | decode
-  | decode base64
-  | decode
 }
 
 # After deprecated commands are removed, prefix will need to be changed to use clip copy or clip copy52.
-- 
2.53.0

